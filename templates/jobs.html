{% extends "base.html" %}

{% block title %}Browse Jobs - FitApply{% endblock %}

{% block content %}
<div class="jobs-container">
    <h1 style="margin-bottom: 32px;">Find Your Next Opportunity</h1>

    <!-- Filters -->
    <div class="filters">
        <div class="filter-group">
            <label for="search">Search Jobs</label>
            <input type="text" id="search" placeholder="Search by title, company, skills...">
        </div>
        <div class="filter-group">
            <label for="category">Category</label>
            <select id="category">
                <option value="">All Categories</option>
                <option value="Backend">Backend</option>
                <option value="Frontend">Frontend</option>
                <option value="Full Stack">Full Stack</option>
                <option value="DevOps">DevOps</option>
                <option value="Data Science">Data Science</option>
                <option value="Mobile">Mobile</option>
                <option value="Design">Design</option>
                <option value="QA">QA</option>
                <option value="Database">Database</option>
                <option value="Cloud">Cloud</option>
                <option value="Security">Security</option>
                <option value="AI/ML">AI/ML</option>
                <option value="Management">Management</option>
                <option value="Architecture">Architecture</option>
            </select>
        </div>
    </div>

    <!-- Jobs List -->
    {% if jobs|length > 0 %}
        <div class="job-list">
            {% for job in jobs %}
                <div class="job">
                    <img src="{{ job.get('image', 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=400') }}" alt="{{ job.title }}" class="job-image">
                    <div class="job-content">
                        <h3>{{ job.title }}</h3>
                        <div class="job-company">{{ job.company }}</div>
                        <div class="meta">
                            <div class="meta-item"> {{ job.location }}</div>
                            <div class="meta-item"> {{ job.salary }}</div>
                            <div class="meta-item"> {{ job.category }}</div>
                        </div>
                        <div class="job-description">{{ job.description[:100] }}...</div>
                        <div class="job-footer">
                            <a href="{{ url_for('job_detail', job_id=job._id) }}" class="btn">View Details</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No Jobs Found</h3>
            <p>We couldn't find any jobs matching your criteria. Try adjusting your filters.</p>
        </div>
    {% endif %}
</div>

<script>
    // Filter jobs based on search and category
    document.getElementById('search').addEventListener('input', function(e) {
        const search = e.target.value.toLowerCase();
        const category = document.getElementById('category').value;
        const url = new URL(window.location);
        url.searchParams.set('search', search);
        url.searchParams.set('category', category);
        window.location.href = url.toString();
    });

    document.getElementById('category').addEventListener('change', function(e) {
        const search = document.getElementById('search').value;
        const category = e.target.value;
        const url = new URL(window.location);
        url.searchParams.set('search', search);
        url.searchParams.set('category', category);
        window.location.href = url.toString();
    });
</script>
{% endblock %}
